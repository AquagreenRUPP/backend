{"ast":null,"code":"import _regeneratorRuntime from \"D:/DSE_Folder/Year_3/Sem_2/Web_Agri_DJango/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"D:/DSE_Folder/Year_3/Sem_2/Web_Agri_DJango/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport _objectSpread from \"D:/DSE_Folder/Year_3/Sem_2/Web_Agri_DJango/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport { mapGetters } from 'vuex';\nexport default {\n  name: 'UploadView',\n  data: function data() {\n    return {\n      title: '',\n      file: null,\n      uploadSuccess: false,\n      uploadedFileId: null\n    };\n  },\n  computed: _objectSpread(_objectSpread({}, mapGetters(['isLoading', 'getError'])), {}, {\n    loading: function loading() {\n      return this.isLoading;\n    },\n    error: function error() {\n      return this.getError;\n    }\n  }),\n  methods: {\n    handleFileChange: function handleFileChange(event) {\n      this.file = event.target.files[0];\n    },\n    uploadFile: function uploadFile() {\n      var _this = this;\n      return _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n        var response;\n        return _regeneratorRuntime().wrap(function _callee$(_context) {\n          while (1) switch (_context.prev = _context.next) {\n            case 0:\n              if (_this.file) {\n                _context.next = 2;\n                break;\n              }\n              return _context.abrupt(\"return\");\n            case 2:\n              _context.prev = 2;\n              _context.next = 5;\n              return _this.$store.dispatch('uploadFile', {\n                title: _this.title,\n                file: _this.file\n              });\n            case 5:\n              response = _context.sent;\n              if (response && response.file && response.file.id) {\n                _this.uploadSuccess = true;\n                _this.uploadedFileId = response.file.id;\n                _this.title = '';\n                _this.file = null;\n                // Reset the file input\n                document.getElementById('file').value = '';\n              }\n              _context.next = 12;\n              break;\n            case 9:\n              _context.prev = 9;\n              _context.t0 = _context[\"catch\"](2);\n              console.error('Error in upload component:', _context.t0);\n            case 12:\n            case \"end\":\n              return _context.stop();\n          }\n        }, _callee, null, [[2, 9]]);\n      }))();\n    }\n  }\n};","map":{"version":3,"names":["mapGetters","name","data","title","file","uploadSuccess","uploadedFileId","computed","_objectSpread","loading","isLoading","error","getError","methods","handleFileChange","event","target","files","uploadFile","_this","_asyncToGenerator","_regeneratorRuntime","mark","_callee","response","wrap","_callee$","_context","prev","next","abrupt","$store","dispatch","sent","id","document","getElementById","value","t0","console","stop"],"sources":["D:\\DSE_Folder\\Year_3\\Sem_2\\Web_Agri_DJango\\frontend\\src\\views\\UploadView.vue"],"sourcesContent":["<template>\n  <div class=\"upload\">\n    <h1>Upload Excel File</h1>\n    <p class=\"lead mb-4\">Upload your Excel file to process and extract data.</p>\n\n    <div class=\"alert alert-danger\" v-if=\"error\">\n      {{ error }}\n    </div>\n\n    <div class=\"alert alert-success\" v-if=\"uploadSuccess\">\n      File uploaded successfully! <router-link :to=\"'/files/' + uploadedFileId\">View processed data</router-link>\n    </div>\n\n    <div class=\"card\">\n      <div class=\"card-body\">\n        <form @submit.prevent=\"uploadFile\" enctype=\"multipart/form-data\">\n          <div class=\"mb-3\">\n            <label for=\"title\" class=\"form-label\">File Title</label>\n            <input \n              type=\"text\" \n              class=\"form-control\" \n              id=\"title\" \n              v-model=\"title\" \n              placeholder=\"Enter a descriptive title for the file\"\n              required\n            >\n          </div>\n          \n          <div class=\"mb-3\">\n            <label for=\"file\" class=\"form-label\">Excel File</label>\n            <input \n              type=\"file\" \n              class=\"form-control\" \n              id=\"file\" \n              @change=\"handleFileChange\" \n              accept=\".xlsx,.xls\"\n              required\n            >\n            <div class=\"form-text\">Only Excel files (.xlsx, .xls) are accepted.</div>\n          </div>\n          \n          <div class=\"d-grid gap-2\">\n            <button type=\"submit\" class=\"btn btn-primary\" :disabled=\"loading || !file\">\n              <span v-if=\"loading\" class=\"spinner-border spinner-border-sm me-2\" role=\"status\" aria-hidden=\"true\"></span>\n              {{ loading ? 'Uploading...' : 'Upload File' }}\n            </button>\n          </div>\n        </form>\n      </div>\n    </div>\n\n    <div class=\"mt-4\">\n      <h3>Upload Instructions</h3>\n      <ol class=\"list-group list-group-numbered mb-4\">\n        <li class=\"list-group-item\">Prepare your Excel file with properly formatted data</li>\n        <li class=\"list-group-item\">Enter a descriptive title for your file</li>\n        <li class=\"list-group-item\">Select the Excel file from your computer</li>\n        <li class=\"list-group-item\">Click the \"Upload File\" button</li>\n        <li class=\"list-group-item\">Wait for the file to be processed</li>\n      </ol>\n      <p>After uploading, you'll be able to view the processed data and visualize it.</p>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { mapGetters } from 'vuex'\n\nexport default {\n  name: 'UploadView',\n  data() {\n    return {\n      title: '',\n      file: null,\n      uploadSuccess: false,\n      uploadedFileId: null\n    }\n  },\n  computed: {\n    ...mapGetters(['isLoading', 'getError']),\n    loading() {\n      return this.isLoading\n    },\n    error() {\n      return this.getError\n    }\n  },\n  methods: {\n    handleFileChange(event) {\n      this.file = event.target.files[0]\n    },\n    async uploadFile() {\n      if (!this.file) {\n        return\n      }\n      \n      try {\n        const response = await this.$store.dispatch('uploadFile', {\n          title: this.title,\n          file: this.file\n        })\n        \n        if (response && response.file && response.file.id) {\n          this.uploadSuccess = true\n          this.uploadedFileId = response.file.id\n          this.title = ''\n          this.file = null\n          // Reset the file input\n          document.getElementById('file').value = ''\n        }\n      } catch (error) {\n        console.error('Error in upload component:', error)\n      }\n    }\n  }\n}\n</script>\n"],"mappings":";;;AAkEA,SAASA,UAAS,QAAS,MAAK;AAEhC,eAAe;EACbC,IAAI,EAAE,YAAY;EAClBC,IAAI,WAAJA,IAAIA,CAAA,EAAG;IACL,OAAO;MACLC,KAAK,EAAE,EAAE;MACTC,IAAI,EAAE,IAAI;MACVC,aAAa,EAAE,KAAK;MACpBC,cAAc,EAAE;IAClB;EACF,CAAC;EACDC,QAAQ,EAAAC,aAAA,CAAAA,aAAA,KACHR,UAAU,CAAC,CAAC,WAAW,EAAE,UAAU,CAAC,CAAC;IACxCS,OAAO,WAAPA,OAAOA,CAAA,EAAG;MACR,OAAO,IAAI,CAACC,SAAQ;IACtB,CAAC;IACDC,KAAK,WAALA,KAAKA,CAAA,EAAG;MACN,OAAO,IAAI,CAACC,QAAO;IACrB;EAAA,EACD;EACDC,OAAO,EAAE;IACPC,gBAAgB,WAAhBA,gBAAgBA,CAACC,KAAK,EAAE;MACtB,IAAI,CAACX,IAAG,GAAIW,KAAK,CAACC,MAAM,CAACC,KAAK,CAAC,CAAC;IAClC,CAAC;IACKC,UAAU,WAAVA,UAAUA,CAAA,EAAG;MAAA,IAAAC,KAAA;MAAA,OAAAC,iBAAA,cAAAC,mBAAA,GAAAC,IAAA,UAAAC,QAAA;QAAA,IAAAC,QAAA;QAAA,OAAAH,mBAAA,GAAAI,IAAA,UAAAC,SAAAC,QAAA;UAAA,kBAAAA,QAAA,CAAAC,IAAA,GAAAD,QAAA,CAAAE,IAAA;YAAA;cAAA,IACZV,KAAI,CAACf,IAAI;gBAAAuB,QAAA,CAAAE,IAAA;gBAAA;cAAA;cAAA,OAAAF,QAAA,CAAAG,MAAA;YAAA;cAAAH,QAAA,CAAAC,IAAA;cAAAD,QAAA,CAAAE,IAAA;cAAA,OAKWV,KAAI,CAACY,MAAM,CAACC,QAAQ,CAAC,YAAY,EAAE;gBACxD7B,KAAK,EAAEgB,KAAI,CAAChB,KAAK;gBACjBC,IAAI,EAAEe,KAAI,CAACf;cACb,CAAC;YAAA;cAHKoB,QAAO,GAAAG,QAAA,CAAAM,IAAA;cAKb,IAAIT,QAAO,IAAKA,QAAQ,CAACpB,IAAG,IAAKoB,QAAQ,CAACpB,IAAI,CAAC8B,EAAE,EAAE;gBACjDf,KAAI,CAACd,aAAY,GAAI,IAAG;gBACxBc,KAAI,CAACb,cAAa,GAAIkB,QAAQ,CAACpB,IAAI,CAAC8B,EAAC;gBACrCf,KAAI,CAAChB,KAAI,GAAI,EAAC;gBACdgB,KAAI,CAACf,IAAG,GAAI,IAAG;gBACf;gBACA+B,QAAQ,CAACC,cAAc,CAAC,MAAM,CAAC,CAACC,KAAI,GAAI,EAAC;cAC3C;cAAAV,QAAA,CAAAE,IAAA;cAAA;YAAA;cAAAF,QAAA,CAAAC,IAAA;cAAAD,QAAA,CAAAW,EAAA,GAAAX,QAAA;cAEAY,OAAO,CAAC5B,KAAK,CAAC,4BAA4B,EAAAgB,QAAA,CAAAW,EAAO;YAAA;YAAA;cAAA,OAAAX,QAAA,CAAAa,IAAA;UAAA;QAAA,GAAAjB,OAAA;MAAA;IAErD;EACF;AACF","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}