{"ast":null,"code":"import _toConsumableArray from \"D:/DSE_Folder/Year_3/Sem_2/Web_Agri_DJango/frontend/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";\nimport { createElementVNode as _createElementVNode, toDisplayString as _toDisplayString, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, createTextVNode as _createTextVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, createVNode as _createVNode, renderList as _renderList, Fragment as _Fragment, normalizeClass as _normalizeClass } from \"vue\";\nvar _hoisted_1 = {\n  \"class\": \"files\"\n};\nvar _hoisted_2 = {\n  key: 0,\n  \"class\": \"alert alert-danger\"\n};\nvar _hoisted_3 = {\n  \"class\": \"d-flex justify-content-between align-items-center mb-4\"\n};\nvar _hoisted_4 = {\n  key: 1,\n  \"class\": \"text-center my-5\"\n};\nvar _hoisted_5 = {\n  key: 2,\n  \"class\": \"alert alert-info\"\n};\nvar _hoisted_6 = {\n  key: 3,\n  \"class\": \"table-responsive\"\n};\nvar _hoisted_7 = {\n  \"class\": \"table table-striped table-hover\"\n};\nvar _hoisted_8 = [\"onClick\", \"disabled\"];\nvar _hoisted_9 = {\n  key: 0,\n  \"class\": \"spinner-border spinner-border-sm me-1\",\n  role: \"status\",\n  \"aria-hidden\": \"true\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  var _component_router_link = _resolveComponent(\"router-link\");\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_cache[10] || (_cache[10] = _createElementVNode(\"h1\", null, \"Uploaded Files\", -1 /* HOISTED */)), _cache[11] || (_cache[11] = _createElementVNode(\"p\", {\n    \"class\": \"lead mb-4\"\n  }, \"View and manage your uploaded Excel files.\", -1 /* HOISTED */)), $options.error ? (_openBlock(), _createElementBlock(\"div\", _hoisted_2, _toDisplayString($options.error), 1 /* TEXT */)) : _createCommentVNode(\"v-if\", true), _createElementVNode(\"div\", _hoisted_3, [_createElementVNode(\"button\", {\n    \"class\": \"btn btn-primary\",\n    onClick: _cache[0] || (_cache[0] = function () {\n      return $options.refreshFiles && $options.refreshFiles.apply($options, arguments);\n    })\n  }, _cache[1] || (_cache[1] = [_createElementVNode(\"i\", {\n    \"class\": \"bi bi-arrow-clockwise me-2\"\n  }, null, -1 /* HOISTED */), _createTextVNode(\" Refresh \")])), _createVNode(_component_router_link, {\n    to: \"/upload\",\n    \"class\": \"btn btn-success\"\n  }, {\n    \"default\": _withCtx(function () {\n      return _cache[2] || (_cache[2] = [_createElementVNode(\"i\", {\n        \"class\": \"bi bi-upload me-2\"\n      }, null, -1 /* HOISTED */), _createTextVNode(\" Upload New File \")]);\n    }),\n    _: 1 /* STABLE */\n  })]), $options.loading ? (_openBlock(), _createElementBlock(\"div\", _hoisted_4, _cache[3] || (_cache[3] = [_createElementVNode(\"div\", {\n    \"class\": \"spinner-border text-primary\",\n    role: \"status\"\n  }, [_createElementVNode(\"span\", {\n    \"class\": \"visually-hidden\"\n  }, \"Loading...\")], -1 /* HOISTED */), _createElementVNode(\"p\", {\n    \"class\": \"mt-2\"\n  }, \"Loading files...\", -1 /* HOISTED */)]))) : $options.files.length === 0 ? (_openBlock(), _createElementBlock(\"div\", _hoisted_5, [_cache[5] || (_cache[5] = _createTextVNode(\" No files uploaded yet. \")), _createVNode(_component_router_link, {\n    to: \"/upload\"\n  }, {\n    \"default\": _withCtx(function () {\n      return _cache[4] || (_cache[4] = [_createTextVNode(\"Upload your first file\")]);\n    }),\n    _: 1 /* STABLE */\n  }), _cache[6] || (_cache[6] = _createTextVNode(\". \"))])) : (_openBlock(), _createElementBlock(\"div\", _hoisted_6, [_createElementVNode(\"table\", _hoisted_7, [_cache[9] || (_cache[9] = _createElementVNode(\"thead\", null, [_createElementVNode(\"tr\", null, [_createElementVNode(\"th\", null, \"Title\"), _createElementVNode(\"th\", null, \"Upload Date\"), _createElementVNode(\"th\", null, \"Status\"), _createElementVNode(\"th\", null, \"Actions\")])], -1 /* HOISTED */)), _createElementVNode(\"tbody\", null, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($options.files, function (file) {\n    return _openBlock(), _createElementBlock(\"tr\", {\n      key: file.id\n    }, [_createElementVNode(\"td\", null, _toDisplayString(file.title), 1 /* TEXT */), _createElementVNode(\"td\", null, _toDisplayString($options.formatDate(file.uploaded_at)), 1 /* TEXT */), _createElementVNode(\"td\", null, [_createElementVNode(\"span\", {\n      \"class\": _normalizeClass(file.processed ? 'badge bg-success' : 'badge bg-warning text-dark')\n    }, _toDisplayString(file.processed ? 'Processed' : 'Pending'), 3 /* TEXT, CLASS */)]), _createElementVNode(\"td\", null, [_createVNode(_component_router_link, {\n      to: '/files/' + file.id,\n      \"class\": \"btn btn-sm btn-primary me-2\"\n    }, {\n      \"default\": _withCtx(function () {\n        return _toConsumableArray(_cache[7] || (_cache[7] = [_createTextVNode(\" View Data \")]));\n      }),\n      _: 2 /* DYNAMIC */\n    }, 1032 /* PROPS, DYNAMIC_SLOTS */, [\"to\"]), !file.processed ? (_openBlock(), _createElementBlock(\"button\", {\n      key: 0,\n      \"class\": \"btn btn-sm btn-secondary\",\n      onClick: function onClick($event) {\n        return $options.processFile(file.id);\n      },\n      disabled: $data.processingFile === file.id\n    }, [$data.processingFile === file.id ? (_openBlock(), _createElementBlock(\"span\", _hoisted_9)) : _createCommentVNode(\"v-if\", true), _cache[8] || (_cache[8] = _createTextVNode(\" Process \"))], 8 /* PROPS */, _hoisted_8)) : _createCommentVNode(\"v-if\", true)])]);\n  }), 128 /* KEYED_FRAGMENT */))])])]))]);\n}","map":{"version":3,"names":["key","role","_createElementBlock","_hoisted_1","_createElementVNode","$options","error","_hoisted_2","_toDisplayString","_createCommentVNode","_hoisted_3","onClick","_cache","refreshFiles","apply","arguments","_createTextVNode","_createVNode","_component_router_link","to","_withCtx","_","loading","_hoisted_4","files","length","_hoisted_5","_hoisted_6","_hoisted_7","_Fragment","_renderList","file","id","title","formatDate","uploaded_at","_normalizeClass","processed","_toConsumableArray","$event","processFile","disabled","$data","processingFile","_hoisted_9","_hoisted_8"],"sources":["D:\\DSE_Folder\\Year_3\\Sem_2\\Web_Agri_DJango\\frontend\\src\\views\\FilesView.vue"],"sourcesContent":["<template>\n  <div class=\"files\">\n    <h1>Uploaded Files</h1>\n    <p class=\"lead mb-4\">View and manage your uploaded Excel files.</p>\n\n    <div class=\"alert alert-danger\" v-if=\"error\">\n      {{ error }}\n    </div>\n\n    <div class=\"d-flex justify-content-between align-items-center mb-4\">\n      <button class=\"btn btn-primary\" @click=\"refreshFiles\">\n        <i class=\"bi bi-arrow-clockwise me-2\"></i> Refresh\n      </button>\n      <router-link to=\"/upload\" class=\"btn btn-success\">\n        <i class=\"bi bi-upload me-2\"></i> Upload New File\n      </router-link>\n    </div>\n\n    <div v-if=\"loading\" class=\"text-center my-5\">\n      <div class=\"spinner-border text-primary\" role=\"status\">\n        <span class=\"visually-hidden\">Loading...</span>\n      </div>\n      <p class=\"mt-2\">Loading files...</p>\n    </div>\n\n    <div v-else-if=\"files.length === 0\" class=\"alert alert-info\">\n      No files uploaded yet. <router-link to=\"/upload\">Upload your first file</router-link>.\n    </div>\n\n    <div v-else class=\"table-responsive\">\n      <table class=\"table table-striped table-hover\">\n        <thead>\n          <tr>\n            <th>Title</th>\n            <th>Upload Date</th>\n            <th>Status</th>\n            <th>Actions</th>\n          </tr>\n        </thead>\n        <tbody>\n          <tr v-for=\"file in files\" :key=\"file.id\">\n            <td>{{ file.title }}</td>\n            <td>{{ formatDate(file.uploaded_at) }}</td>\n            <td>\n              <span \n                :class=\"file.processed ? 'badge bg-success' : 'badge bg-warning text-dark'\"\n              >\n                {{ file.processed ? 'Processed' : 'Pending' }}\n              </span>\n            </td>\n            <td>\n              <router-link :to=\"'/files/' + file.id\" class=\"btn btn-sm btn-primary me-2\">\n                View Data\n              </router-link>\n              <button \n                v-if=\"!file.processed\" \n                class=\"btn btn-sm btn-secondary\"\n                @click=\"processFile(file.id)\"\n                :disabled=\"processingFile === file.id\"\n              >\n                <span v-if=\"processingFile === file.id\" class=\"spinner-border spinner-border-sm me-1\" role=\"status\" aria-hidden=\"true\"></span>\n                Process\n              </button>\n            </td>\n          </tr>\n        </tbody>\n      </table>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { mapGetters } from 'vuex'\n\nexport default {\n  name: 'FilesView',\n  data() {\n    return {\n      processingFile: null\n    }\n  },\n  computed: {\n    ...mapGetters(['getFiles', 'isLoading', 'getError']),\n    files() {\n      return this.getFiles\n    },\n    loading() {\n      return this.isLoading\n    },\n    error() {\n      return this.getError\n    }\n  },\n  mounted() {\n    this.fetchFiles()\n  },\n  methods: {\n    async fetchFiles() {\n      await this.$store.dispatch('fetchFiles')\n    },\n    async refreshFiles() {\n      await this.fetchFiles()\n    },\n    async processFile(fileId) {\n      this.processingFile = fileId\n      try {\n        await this.$store.dispatch('processFile', fileId)\n        // Refresh the files list to update the status\n        await this.fetchFiles()\n      } catch (error) {\n        console.error('Error processing file:', error)\n      } finally {\n        this.processingFile = null\n      }\n    },\n    formatDate(dateString) {\n      if (!dateString) return ''\n      const date = new Date(dateString)\n      return new Intl.DateTimeFormat('en-US', {\n        year: 'numeric',\n        month: 'short',\n        day: 'numeric',\n        hour: '2-digit',\n        minute: '2-digit'\n      }).format(date)\n    }\n  }\n}\n</script>\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}