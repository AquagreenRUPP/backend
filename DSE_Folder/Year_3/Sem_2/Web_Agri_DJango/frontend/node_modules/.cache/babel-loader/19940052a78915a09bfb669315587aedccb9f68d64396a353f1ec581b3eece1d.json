{"ast":null,"code":"import _regeneratorRuntime from \"D:/DSE_Folder/Year_3/Sem_2/Web_Agri_DJango/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _typeof from \"D:/DSE_Folder/Year_3/Sem_2/Web_Agri_DJango/frontend/node_modules/@babel/runtime/helpers/esm/typeof.js\";\nimport _asyncToGenerator from \"D:/DSE_Folder/Year_3/Sem_2/Web_Agri_DJango/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport _objectSpread from \"D:/DSE_Folder/Year_3/Sem_2/Web_Agri_DJango/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport \"core-js/modules/es.array.concat.js\";\nimport \"core-js/modules/es.array.is-array.js\";\nimport \"core-js/modules/es.array.join.js\";\nimport \"core-js/modules/es.array.push.js\";\nimport { mapActions } from 'vuex';\nexport default {\n  name: 'RegisterView',\n  data: function data() {\n    return {\n      email: '',\n      phone: '',\n      username: '',\n      password: '',\n      confirmPassword: '',\n      loading: false,\n      error: null\n    };\n  },\n  methods: _objectSpread(_objectSpread({}, mapActions(['registerUser'])), {}, {\n    register: function register() {\n      var _this = this;\n      return _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n        var registrationData, errorData, errorMessages, field, messages;\n        return _regeneratorRuntime().wrap(function _callee$(_context) {\n          while (1) switch (_context.prev = _context.next) {\n            case 0:\n              _this.loading = true;\n              _this.error = null;\n              if (!(_this.password !== _this.confirmPassword)) {\n                _context.next = 6;\n                break;\n              }\n              _this.error = 'Passwords do not match';\n              _this.loading = false;\n              return _context.abrupt(\"return\");\n            case 6:\n              // Create a registration payload with only required fields\n              registrationData = {\n                username: _this.username,\n                password: _this.password\n              }; // Add optional fields only if they have values\n              if (_this.email) registrationData.email = _this.email;\n              if (_this.phone) registrationData.phone = _this.phone;\n              _context.prev = 9;\n              _context.next = 12;\n              return _this.registerUser(registrationData);\n            case 12:\n              _this.$router.push('/');\n              _context.next = 19;\n              break;\n            case 15:\n              _context.prev = 15;\n              _context.t0 = _context[\"catch\"](9);\n              console.error('Registration error:', _context.t0);\n              if (_context.t0.response && _context.t0.response.data) {\n                // Handle different types of error responses\n                errorData = _context.t0.response.data;\n                if (typeof errorData === 'string') {\n                  _this.error = errorData;\n                } else if (_typeof(errorData) === 'object') {\n                  // Format field-specific errors\n                  errorMessages = [];\n                  for (field in errorData) {\n                    messages = Array.isArray(errorData[field]) ? errorData[field].join(', ') : errorData[field];\n                    errorMessages.push(\"\".concat(field, \": \").concat(messages));\n                  }\n                  _this.error = errorMessages.join('\\n');\n                } else {\n                  _this.error = 'Registration failed. Please try again.';\n                }\n              } else {\n                _this.error = 'Registration failed. Please try again.';\n              }\n            case 19:\n              _context.prev = 19;\n              _this.loading = false;\n              return _context.finish(19);\n            case 22:\n            case \"end\":\n              return _context.stop();\n          }\n        }, _callee, null, [[9, 15, 19, 22]]);\n      }))();\n    }\n  })\n};","map":{"version":3,"names":["mapActions","name","data","email","phone","username","password","confirmPassword","loading","error","methods","_objectSpread","register","_this","_asyncToGenerator","_regeneratorRuntime","mark","_callee","registrationData","errorData","errorMessages","field","messages","wrap","_callee$","_context","prev","next","abrupt","registerUser","$router","push","t0","console","response","_typeof","Array","isArray","join","concat","finish","stop"],"sources":["D:\\DSE_Folder\\Year_3\\Sem_2\\Web_Agri_DJango\\frontend\\src\\views\\RegisterView.vue"],"sourcesContent":["<template>\n  <div class=\"register-container\">\n    <div class=\"card register-card\">\n      <div class=\"card-body\">\n        <h2 class=\"text-center mb-4\">\n          <span class=\"brand-name\">Aqua<span class=\"text-success\">Green</span></span>\n        </h2>\n        <div v-if=\"error\" class=\"alert alert-danger\">{{ error }}</div>\n        <form @submit.prevent=\"register\">\n          <!-- Optional fields -->\n          <div class=\"form-group mb-3\">\n            <input\n              type=\"email\"\n              class=\"form-control\"\n              v-model=\"email\"\n              placeholder=\"Email (Optional)\"\n            />\n          </div>\n          <div class=\"form-group mb-3\">\n            <input\n              type=\"text\"\n              class=\"form-control\"\n              v-model=\"phone\"\n              placeholder=\"Phone (Optional)\"\n            />\n          </div>\n          <!-- Required fields -->\n          <div class=\"form-group mb-3\">\n            <input\n              type=\"text\"\n              class=\"form-control\"\n              v-model=\"username\"\n              placeholder=\"Username\"\n              required\n            />\n          </div>\n          <div class=\"form-group mb-3\">\n            <input\n              type=\"password\"\n              class=\"form-control\"\n              v-model=\"password\"\n              placeholder=\"Password\"\n              required\n            />\n          </div>\n          <div class=\"form-group mb-3\">\n            <input\n              type=\"password\"\n              class=\"form-control\"\n              v-model=\"confirmPassword\"\n              placeholder=\"Confirm Password\"\n              required\n            />\n          </div>\n          <button\n            type=\"submit\"\n            class=\"btn btn-success w-100 mt-3\"\n            :disabled=\"loading\"\n          >\n            <span v-if=\"loading\" class=\"spinner-border spinner-border-sm mr-2\"></span>\n            Sign up\n          </button>\n        </form>\n        <div class=\"mt-3 text-center\">\n          <p>Already have an account? <router-link to=\"/login\" class=\"text-success\">Log In</router-link></p>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { mapActions } from 'vuex';\n\nexport default {\n  name: 'RegisterView',\n  data() {\n    return {\n      email: '',\n      phone: '',\n      username: '',\n      password: '',\n      confirmPassword: '',\n      loading: false,\n      error: null\n    };\n  },\n  methods: {\n    ...mapActions(['registerUser']),\n    async register() {\n      this.loading = true;\n      this.error = null;\n      \n      if (this.password !== this.confirmPassword) {\n        this.error = 'Passwords do not match';\n        this.loading = false;\n        return;\n      }\n      \n      // Create a registration payload with only required fields\n      const registrationData = {\n        username: this.username,\n        password: this.password\n      };\n      \n      // Add optional fields only if they have values\n      if (this.email) registrationData.email = this.email;\n      if (this.phone) registrationData.phone = this.phone;\n      \n      try {\n        await this.registerUser(registrationData);\n        this.$router.push('/');\n      } catch (error) {\n        console.error('Registration error:', error);\n        if (error.response && error.response.data) {\n          // Handle different types of error responses\n          const errorData = error.response.data;\n          if (typeof errorData === 'string') {\n            this.error = errorData;\n          } else if (typeof errorData === 'object') {\n            // Format field-specific errors\n            const errorMessages = [];\n            for (const field in errorData) {\n              const messages = Array.isArray(errorData[field]) ? errorData[field].join(', ') : errorData[field];\n              errorMessages.push(`${field}: ${messages}`);\n            }\n            this.error = errorMessages.join('\\n');\n          } else {\n            this.error = 'Registration failed. Please try again.';\n          }\n        } else {\n          this.error = 'Registration failed. Please try again.';\n        }\n      } finally {\n        this.loading = false;\n      }\n    }\n  }\n};\n</script>\n\n<style scoped>\n.register-container {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  min-height: 100vh;\n  background-color: #f8f9fa;\n}\n\n.register-card {\n  width: 100%;\n  max-width: 400px;\n  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);\n  border: none;\n  border-radius: 10px;\n}\n\n.brand-name {\n  font-size: 2rem;\n  font-weight: bold;\n}\n</style>\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}